<!DOCTYPE html>
<head>
    <title>Slot Machine</title>
    <link rel="stylesheet" type="text/css" href="css/browser_reset.css">
	<link rel="stylesheet" type="text/css" href="css/main.css">
</head>
<style>
    .home-icon{
            width: 40px; /* Pas de grootte aan */
            height: 40px;
            margin-left: 0px;
            vertical-align: middle;
        }

		.cart-icon {
            width: 30px; /* Pas de grootte aan */
            height: 30px;
            margin-left: 5px;
            vertical-align: middle;
        }

        .stats-icon {
            width: 30px; /* Pas de grootte aan */
            height: 30px;
            margin-right: 5px;
            vertical-align: middle;
        }


#menu {
  z-index: 1000;
}

#menu-bar {
  width: 45px;
  height: 40px;
  margin: 30px 0 20px 20px;
  cursor: pointer;
}

.bar {
  height: 5px;
  width: 100%;
  background-color: #f8f8d7;
  display: block;
  border-radius: 5px;
  transition: 0.3s ease;
}

#bar1 {
  transform: translateY(-4px);
}

#bar3 {
  transform: translateY(4px);
}

.nav1 {
  transition: 0.3s ease;
  display: none;
}

.nav1 ul {
  padding: 0 22px;
}

.nav1 li {
  list-style: none;
  padding: 12px 0;
}

.nav1 li a {
  color: #cd3f2b;
  font-size: 20px;
  text-decoration: none;
}

.nav1 li a:hover {
  font-weight: bold;
}

.menu-bg, #menu {
  top: 0;
  left: 0;
  position: absolute;
}

.menu-bg {
  z-index: 999;
  width: 0;
  height: 0;
  margin: 30px 0 20px 20px;
  background: radial-gradient(circle, #f8f8d7, #f8f8d7);
  border-radius: 50%;
  transition: 0.3s ease;
}

.change {
  display: block;
}

.change .bar {
  background-color: #cd3f2b;
}

.change #bar1 {
  transform: translateY(4px) rotateZ(-45deg);
}

.change #bar2 {
  opacity: 0;
}

.change #bar3 {
  transform: translateY(-6px) rotateZ(45deg);
}

.change-bg {
  width: 600px;
  height: 540px;
  transform: translate(-60%,-30%);
}
</style>
<html>
<body>
<main>

                <nav class="navigation">
                    <div id="menu">
                        <div id="menu-bar" onclick="menuOnClick()">
                          <div id="bar1" class="bar"></div>
                          <div id="bar2" class="bar"></div>
                          <div id="bar3" class="bar"></div>
                        </div>
                        <nav1 class="nav1" id="nav1">
                          <ul>
                            <li> <a href="index.html">Main menu<img src="images/overig/homeicon.png" alt="home" class="home-icon"></a></li>
                            <li> <a href="store.html">Store<img src="images/overig/storeicon.png" alt="cart" class="cart-icon"></a></li>
                            <li> <a href="stats.html">Stats<img src="images/overig/statsicon.png" alt="stats" class="stats-icon"></a></li>
                        </ul>
                        </nav1> 
                      </div>
                      
                      <div class="menu-bg" id="menu-bg"></div>
                </nav>

	<div class="status" id="status">SPIN TO WIN!</div>
	<div class="slots">
		<div id="slot1" class="a1"></div>
		<div id="slot2" class="a1"></div>
		<div id="slot3" class="a1"></div>
    </div>
	<button type="submit" value="Submit" class="button"  onclick="return gamble(y)" style="vertical-align:middle"><span>SPIN</span></button>
   
<div class="chip-container">
	<input type="image" src="images/blackjack/overig/10-chip.png" onCLick="addbet(10)" class="pokerchip" alt="10 poker chip" width="150" height=auto>
	<input type="image" src="images/blackjack/overig/25-chip.png" onCLick="addbet(25)" class="pokerchip" alt="25 poker chip" width="150" height=auto>
	<input type="image" src="images/blackjack/overig/50-chip.png" onCLick="addbet(50)" class="pokerchip" alt="50 poker chip" width="150" height=auto>
	<input type="image" src="images/blackjack/overig/100-chip.png" onCLick="addbet(100)" class="pokerchip" alt="100 poker chip" width="150" height=auto>
	<input type="image" src="images/blackjack/overig/200-chip.png" onCLick="addbet(200)" class="pokerchip" alt="200 poker chip" width="150" height=auto>
	<input type="image" src="images/blackjack/overig/500-chip.png" onCLick="addbet(500)" class="pokerchip" alt="500 poker chip" width="150" height=auto>
	<input type="image" src="images/blackjack/overig/1000-chip.png" onCLick="addbet(1000)" class="pokerchip" alt="1000 poker chip" width="150" height=auto>
	<input type="image" src="images/blackjack/overig/2000-chip.png" onCLick="addbet(2000)" class="pokerchip" alt="2000 poker chip" width="150" height=auto>
	<input type="image" src="images/blackjack/overig/10000-chip.png" onCLick="addbet(10000)" class="pokerchip" alt="10000 poker chip" width="150" height=auto>
	<input type="image" src="images/blackjack/overig/50000-chip.png" onCLick="addbet(50000)" class="pokerchip" alt="50000 poker chip" width="150" height=auto>
	<input type="image" src="images/blackjack/overig/100000-chip.png" onCLick="addbet(100000)" class="pokerchip" alt="100000 poker chip" width="150" height=auto>
	<input type="image" src="images/blackjack/overig/500000-chip.png" onCLick="addbet(500000)" class="pokerchip" alt="500000 poker chip" width="150" height=auto>
	<input type="image" src="images/blackjack/overig/1mil-chip.png" onCLick="addbet(1000000)" class="pokerchip" alt="1000000 poker chip" width="150" height=auto>
	<input type="image" src="images/blackjack/overig/10mil-chip.png" onCLick="addbet(10000000)" class="pokerchip" alt="10000000 poker chip" width="150" height=auto>
	<input type="image" src="images/blackjack/overig/allin-chip.png" onclick="addbet('allin')" class="pokerchip" alt="All in poker chip" width="150" height="auto">
</div>

<div class="status">
<table>
	<tr>
		<td id="message1">Money: $0</td>
		<td id="message2">Now Betting: $0</td>
    </tr>
	</table>
</div>
</main>

<div class="payout-container">
    <h2>PAYOUTS</h2>

    <!-- 2 dezelfde -->
    <div class="payout-item">
        <div class="payout-icon a1"></div>
        <div class="payout-icon a1"></div>
        x2
    </div>

    <!-- 3 dezelfde -->
    <div class="payout-item">
        <div class="payout-icon a3"></div>
        <div class="payout-icon a3"></div>
        <div class="payout-icon a3"></div>
        x3
    </div>
    <div class="payout-item">
        <div class="payout-icon a6"></div>
        <div class="payout-icon a6"></div>
        <div class="payout-icon a6"></div>
        x3
    </div>
    <div class="payout-item">
        <div class="payout-icon a2"></div>
        <div class="payout-icon a2"></div>
        <div class="payout-icon a2"></div>
        x4
    </div>
    <div class="payout-item">
        <div class="payout-icon a5"></div>
        <div class="payout-icon a5"></div>
        <div class="payout-icon a5"></div>
        x4
    </div>
    <div class="payout-item">
        <div class="payout-icon a4"></div>
        <div class="payout-icon a4"></div>
        <div class="payout-icon a4"></div>
        x4
    </div>
    <div class="payout-item">
        <div class="payout-icon a7"></div>
        <div class="payout-icon a7"></div>
        <div class="payout-icon a7"></div>
        x4
    </div>
    <div class="payout-item">
        <div class="payout-icon a1"></div>
        <div class="payout-icon a1"></div>
        <div class="payout-icon a1"></div>
        x5
    </div>
</div>



<script>
function menuOnClick() {
    document.getElementById("menu-bar").classList.toggle("change");
    document.getElementById("nav1").classList.toggle("change");
    document.getElementById("menu-bg").classList.toggle("change-bg");
}

var action = false;
let status = document.getElementById("status");

// coins uit localStorage laden of start op 0
var coins = Number(localStorage.getItem("coins")) || 0;
var y = 0; // huidige inzet

// initial display
document.getElementById("message1").innerHTML = "Money: $" + coins;
document.getElementById("message2").innerHTML = "Now Betting: $0";

// functie om chips toe te voegen
function addbet(amount){
    if(amount === "allin"){
        if(coins <= 0){
            status.innerHTML = "You have no coins!";
            return;
        }
        y = coins; // alles inzetten
        document.getElementById("message2").innerHTML = "Now Betting: $" + y;
        status.innerHTML = "All in!";
        return;
    }

    if (y + amount > coins) {
        status.innerHTML = "Not enough funds.";
        return;
    }

    y += amount;
    document.getElementById("message2").innerHTML = "Now Betting: $" + y;
    status.innerHTML = "Bet placed.";
}

// functie om te spinnen
function gamble(y){
    if(action) return;

    if(y <= 0){
        status.innerHTML = "Place a bet first!";
        return;
    }

    if(y > coins){
        status.innerHTML = "Not enough funds.";
        y = 0;
        document.getElementById("message2").innerHTML = "Now Betting: $0";
        return;
    }

    action = true;
    status.innerHTML = "SPINNING";

    // randomize eindplaatje voor elk slot (1-7)
    let final1 = randomInt(1,7);
    let final2 = randomInt(1,7);
    let final3 = randomInt(1,7);

    let i1=0, i2=0, i3=0;

    let slot1Int = setInterval(function(){
        i1++;
        let el = document.getElementById("slot1");
        if(i1 >= 20 + final1){
            clearInterval(slot1Int);
            el.className = "a" + final1;
            return;
        }
        el.className = "a" + randomInt(1,7);
    }, 50);

    let slot2Int = setInterval(function(){
        i2++;
        let el = document.getElementById("slot2");
        if(i2 >= 20 + final2){
            clearInterval(slot2Int);
            el.className = "a" + final2;
            return;
        }
        el.className = "a" + randomInt(1,7);
    }, 50);

    let slot3Int = setInterval(function(){
        i3++;
        let el = document.getElementById("slot3");
        if(i3 >= 20 + final3){
            clearInterval(slot3Int);
            el.className = "a" + final3;
            testWin(); // check win als laatste klaar
            return;
        }
        el.className = "a" + randomInt(1,7);
    }, 50);
}

// win / lose logica
function testWin(){
    let slot1 = document.getElementById("slot1").className;
    let slot2 = document.getElementById("slot2").className;
    let slot3 = document.getElementById("slot3").className;

    let payout = 0;

    const multipliers2 = {
        "a1": 2, // two 7s
        "a2": 0,
        "a3": 0,
        "a4": 0,
        "a5": 0,
        "a6": 0,
        "a7": 0
    };

    const multipliers3 = {
        "a1": 5, // three 7s
        "a2": 3,
        "a3": 3,
        "a4": 4,
        "a5": 4,
        "a6": 3,
        "a7": 4
    };

    // check voor 3 dezelfde
    if(slot1 === slot2 && slot2 === slot3){
        payout = y * (multipliers3[slot1] || 0);
    }
    // check voor 2 dezelfde (en dat het niet 3 dezelfde waren)
    else if(slot1 === slot2 || slot1 === slot3 || slot2 === slot3){
        let sym = slot1 === slot2 ? slot1 : (slot1 === slot3 ? slot1 : slot2);
        payout = y * (multipliers2[sym] || 0);
    }

    if(payout > 0){
        status.innerHTML = "YOU WIN! +" + payout + " coins";
        coins += payout;
    } else {
        status.innerHTML = "YOU LOSE!";
        coins -= y;
        if(coins < 0) coins = 0;
    }

    y = 0; // reset inzet
    document.getElementById("message1").innerHTML = "Money: $" + coins;
    document.getElementById("message2").innerHTML = "Now Betting: $0";

    localStorage.setItem("coins", coins);

    action = false;
}

// helper functie
function randomInt(min, max){
    return Math.floor((Math.random() * (max-min+1)) + min);
}
</script>




</body>
</html>